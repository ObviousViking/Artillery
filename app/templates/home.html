{% extends 'base.html' %}
{% block content %}
<h1>One-off Download</h1>
<p>Paste a gallery URL to trigger a single gallery-dl run. Recent images are shown below.</p>
<form method="post" style="margin-bottom:1.5rem;">
    <label for="gallery_url">Gallery URL</label>
    <input type="text" id="gallery_url" name="gallery_url" placeholder="https://..." required>
    <div style="margin-top:0.75rem; display:flex; gap:0.75rem; flex-wrap:wrap; align-items:center;">
        <button type="submit">Start Download</button>
    </div>
</form>
{% if output %}
    <h2>Command Output</h2>
    <pre style="background:#0f0f0f; color:#e0e0e0; padding:1rem; border-radius:8px; overflow:auto; max-height:320px;">{{ output }}</pre>
{% endif %}

<h2>Recent Images</h2>
<div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); gap:0.75rem;">
    {% for img in images %}
        <div style="background:#202020; padding:0.5rem; border-radius:6px; text-align:center;">
            <img src="{{ url_for('artillery.downloads', filename=img) }}" alt="recent image" style="max-width:100%; border-radius:4px;">
            <div style="font-size:0.8rem; color:#a0a0a0; margin-top:0.35rem;">{{ img }}</div>
        </div>
    {% else %}
        <p>No images found in /downloads yet.</p>
    {% endfor %}
</div>
{% endblock %}
